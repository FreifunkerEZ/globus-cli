<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Globus CLI Examples &mdash; globus-cli 0.5.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.5.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="globus-cli 0.5.1.0 documentation" href="index.html" />
    <link rel="prev" title="Globus CLI" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="index.html" title="Globus CLI"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">globus-cli 0.5.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="globus-cli-examples">
<h1>Globus CLI Examples<a class="headerlink" href="#globus-cli-examples" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The following examples are all written for a Bash shell. If you are running
another shell you may need to modify the non globus commands and syntax
found in these examples.</p>
<p>These examples also assume the user has already successfully logged into
Globus. To do so run</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ globus login
</pre></div>
</div>
<p class="last">and follow the instructions.
If you are having problems logging in, consult
<a class="reference internal" href="index.html#getting-started"><span class="std std-ref">Getting Started</span></a></p>
</div>
<div class="section" id="finding-an-endpoint">
<h2>Finding an Endpoint<a class="headerlink" href="#finding-an-endpoint" title="Permalink to this headline">¶</a></h2>
<p>Searches for a tutorial endpoint, then stores its ID in a local variable to
allow for human-readable calls to further globus endpoint commands.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ globus endpoint search <span class="s2">&quot;Globus Tutorial Endpoint&quot;</span>
Owner                      <span class="p">|</span> ID                                   <span class="p">|</span> Display Name
-------------------------- <span class="p">|</span> ------------------------------------ <span class="p">|</span> --------------------------
go@globusid.org            <span class="p">|</span> ddb59aef-6d04-11e5-ba46-22000b92c6ec <span class="p">|</span> Globus Tutorial Endpoint 1
go@globusid.org            <span class="p">|</span> ddb59af0-6d04-11e5-ba46-22000b92c6ec <span class="p">|</span> Globus Tutorial Endpoint 2

<span class="c1"># copy and paste the desired Endpoint ID from the search results</span>
$ <span class="nv">ep1</span><span class="o">=</span>ddb59aef-6d04-11e5-ba46-22000b92c6ec

<span class="c1"># now we can use the endpoint in a human readable fashion</span>
$ globus endpoint show <span class="nv">$ep1</span>
Display Name: Globus Tutorial Endpoint 1
ID:           ddb59aef-6d04-11e5-ba46-22000b92c6ec
Owner:        go@globusid.org
Activated:    False
Shareable:    True
Department:   None
Keywords:     None
</pre></div>
</div>
<p>Search results truncated for readability.</p>
</div>
<div class="section" id="endpoint-manipulation">
<h2>Endpoint Manipulation<a class="headerlink" href="#endpoint-manipulation" title="Permalink to this headline">¶</a></h2>
<p>Demonstrates the synchronous commands of mkdir, rename, and ls.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Tutorial Endpoint ID found from &#39;globus endpoint search Tutorial&#39;</span>
$ <span class="nv">ep1</span><span class="o">=</span>ddb59aef-6d04-11e5-ba46-22000b92c6ec

<span class="c1"># Make a new directory</span>
$ globus mkdir <span class="nv">$ep1</span>:~/cli_example_dir
The directory was created successfully

<span class="c1"># Rename the directory</span>
$ globus rename <span class="nv">$ep1</span>:~/cli_example_dir <span class="nv">$ep1</span>:~/cli_example_dir_renamed
File or directory renamed successfully

<span class="c1"># Show the directory contents after the changes</span>
<span class="c1"># (assuming ~/ was empty before these commands)</span>
$ globus ls <span class="nv">$ep1</span>:~/
cli_example_dir_renamed/
</pre></div>
</div>
</div>
<div class="section" id="single-item-transfers">
<h2>Single Item Transfers<a class="headerlink" href="#single-item-transfers" title="Permalink to this headline">¶</a></h2>
<p>Submits transfer requests for a file and a directory from one Globus Tutorial
Endpoint to another</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Tutorial Endpoint IDs found from &#39;globus endpoint search Tutorial&#39;</span>
$ <span class="nv">ep1</span><span class="o">=</span>ddb59aef-6d04-11e5-ba46-22000b92c6ec
$ <span class="nv">ep2</span><span class="o">=</span>ddb59af0-6d04-11e5-ba46-22000b92c6ec

<span class="c1"># transfer file1.txt from one endpoint to another</span>
$ globus transfer <span class="nv">$ep1</span>:/share/godata/file1.txt <span class="nv">$ep2</span>:~/file1.txt <span class="se">\</span>
    --label <span class="s2">&quot;CLI single file&quot;</span>
Message: The transfer has been accepted and a task has been created and queued <span class="k">for</span> execution
Task ID: 466a5962-dda0-11e6-9d11-22000a1e3b52

<span class="c1"># recursively transfer the godata folder from one endpoint to another</span>
$ globus transfer <span class="nv">$ep1</span>:/share/godata <span class="nv">$ep2</span>:~/godata <span class="se">\</span>
    --recursive --label <span class="s2">&quot;CLI single folder&quot;</span>
Message: The transfer has been accepted and a task has been created and queued <span class="k">for</span> execution
Task ID: 47477b62-dda0-11e6-9d11-22000a1e3b52
</pre></div>
</div>
</div>
<div class="section" id="batch-transfers">
<h2>Batch Transfers<a class="headerlink" href="#batch-transfers" title="Permalink to this headline">¶</a></h2>
<p>Uses a .txt file to request multiple files in one transfer request.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># this is the contents of in.txt:</span>
<span class="c1"># a list of source paths followed by destination paths</span>

file1.txt file1.txt
file2.txt file2.txt <span class="c1"># inline-comments are also allowed</span>
file3.txt file3.txt
</pre></div>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Tutorial Endpoint IDs found from &#39;globus endpoint search Tutorial&#39;</span>
$ <span class="nv">ep1</span><span class="o">=</span>ddb59aef-6d04-11e5-ba46-22000b92c6ec
$ <span class="nv">ep2</span><span class="o">=</span>ddb59af0-6d04-11e5-ba46-22000b92c6ec

<span class="c1"># since batch mode reads from stdin, we can direct input from a .txt file</span>
<span class="c1"># all paths from stdin are relative to the paths supplied here</span>
$ globus transfer <span class="nv">$ep1</span>:/share/godata/ <span class="nv">$ep2</span>:~/ <span class="se">\</span>
    --batch --label <span class="s2">&quot;CLI Batch&quot;</span> &lt; in.txt
Message: The transfer has been accepted and a task has been created and queued <span class="k">for</span> execution
Task ID: 306900e0-dda1-11e6-9d11-22000a1e3b52
</pre></div>
</div>
<p>Note that only one task was needed even though there are multiple files to be
transferred.</p>
</div>
<div class="section" id="deletions">
<h2>Deletions<a class="headerlink" href="#deletions" title="Permalink to this headline">¶</a></h2>
<p>Submits delete task requests for the files transferred by the previous two
examples. Note that even if the target files are non-existent this example will
still submit delete tasks without error, but the tasks themselves will fail.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># this is the contents of in.txt:</span>
<span class="c1"># a list of source paths</span>

file1.txt
file2.txt <span class="c1"># inline comments are supported</span>
file3.txt
</pre></div>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Tutorial Endpoint ID found from &#39;globus endpoint search Tutorial&#39;</span>
$ <span class="nv">ep2</span><span class="o">=</span>ddb59af0-6d04-11e5-ba46-22000b92c6ec

<span class="c1"># recursive deletion of a single folder</span>
$ globus delete <span class="nv">$ep2</span>:~/godata --recursive --label <span class="s2">&quot;CLI single delete&quot;</span>
Message: The delete has been accepted and a task has been created and queued <span class="k">for</span> execution
Task ID: a3ec193a-dda1-11e6-9d11-22000a1e3b52

<span class="c1"># batch deletion of multiple files</span>
<span class="c1"># we are again using a .txt file for our batch stdin</span>
$ globus delete <span class="nv">$ep2</span>:~/ --batch --label <span class="s2">&quot;CLI batch delete&quot;</span> &lt; in.txt
Message: The delete has been accepted and a task has been created and queued <span class="k">for</span> execution
Task ID: a4761f4a-dda1-11e6-9d11-22000a1e3b52
</pre></div>
</div>
</div>
<div class="section" id="task-management">
<h2>Task Management<a class="headerlink" href="#task-management" title="Permalink to this headline">¶</a></h2>
<p>Submits an unauthorized transfer task to demonstrate how to view data
on why a task hasn&#8217;t completed and then cancel the task</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Tutorial Endpoint IDs found from &#39;globus endpoint search Tutorial&#39;</span>
$ <span class="nv">ep1</span><span class="o">=</span>ddb59aef-6d04-11e5-ba46-22000b92c6ec
$ <span class="nv">ep2</span><span class="o">=</span>ddb59af0-6d04-11e5-ba46-22000b92c6ec

<span class="c1"># submit a transfer request we do not have permission for</span>
$ globus transfer <span class="nv">$ep1</span>:/share/godata <span class="nv">$ep2</span>:/share/godata <span class="se">\</span>
    --recursive --label <span class="s2">&quot;Unauthorized Transfer&quot;</span>
Message: The transfer has been accepted and a task has been created and queued <span class="k">for</span> execution
Task ID: 67d6e4ba-dda2-11e6-9d11-22000a1e3b52

<span class="c1"># copy and paste the task id for later use</span>
$ <span class="nv">task_id</span><span class="o">=</span>67d6e4ba-dda2-11e6-9d11-22000a1e3b52

<span class="c1"># view details about the task</span>
<span class="c1"># note the Details field reads PERMISSION_DENIED</span>
$ globus task show <span class="nv">$task_id</span>
Label:                Unauthorized Transfer
Task ID:              67d6e4ba-dda2-11e6-9d11-22000a1e3b52
Type:                 TRANSFER
Directories:          1
Files:                3
Status:               ACTIVE
Request Time:         2017-01-18 17:20:28+00:00
Deadline:             2017-01-19 17:20:28+00:00
Details:              PERMISSION_DENIED
Source Endpoint:      Globus Tutorial Endpoint 1
Destination Endpoint: Globus Tutorial Endpoint 2

<span class="c1"># cancel the task</span>
$ globus task cancel <span class="nv">$task_id</span>
The task has been cancelled successfully.
</pre></div>
</div>
<p>Note the Details field read PERMISSION_DENIED, but the status field was still
ACTIVE. Globus will eventually time out such a request when the Deadline is
reached, but the user has until then to try to repair any permissions.</p>
</div>
<div class="section" id="bookmarks">
<h2>Bookmarks<a class="headerlink" href="#bookmarks" title="Permalink to this headline">¶</a></h2>
<p>Creates a bookmark then demonstrates how they can be used in place of UUIDs</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Tutorial Endpoint ID found from &#39;globus endpoint search Tutorial&#39;</span>
$ <span class="nv">ep1</span><span class="o">=</span>ddb59aef-6d04-11e5-ba46-22000b92c6ec

<span class="c1"># Make a new bookmark at Tutorial Endpoint 1&#39;s godata folder</span>
$ globus bookmark create <span class="nv">$ep1</span>:/share/godata/ <span class="s2">&quot;Example Bookmark&quot;</span>
Bookmark ID: ab45785a-dda3-11e6-9d11-22000a1e3b52

<span class="c1"># The bookmark now shows up in the bookmarks list</span>
$ globus bookmark list
Name             <span class="p">|</span> Endpoint ID                          <span class="p">|</span> Bookmark ID                          <span class="p">|</span> Path
---------------- <span class="p">|</span> ------------------------------------ <span class="p">|</span> ------------------------------------ <span class="p">|</span> --------------
Example Bookmark <span class="p">|</span> ddb59aef-6d04-11e5-ba46-22000b92c6ec <span class="p">|</span> ab45785a-dda3-11e6-9d11-22000a1e3b52 <span class="p">|</span> /share/godata/

<span class="c1"># The bookmark can now be used to get a path without any UUIDs</span>
$ <span class="nv">path</span><span class="o">=</span><span class="k">$(</span>globus bookmark locate <span class="s2">&quot;Example Bookmark&quot;</span><span class="k">)</span>
$ globus ls <span class="nv">$path</span>
file1.txt
file2.txt
file3.txt
</pre></div>
</div>
</div>
<div class="section" id="shared-endpoints">
<h2>Shared Endpoints<a class="headerlink" href="#shared-endpoints" title="Permalink to this headline">¶</a></h2>
<p>Makes a directory on a Tutorial Endpoint, sets it up as a Shared Endpoint, and
creates a permission for that endpoint.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Tutorial Endpoint ID found from &#39;globus endpoint search Tutorial&#39;</span>
$ <span class="nv">ep1</span><span class="o">=</span>ddb59aef-6d04-11e5-ba46-22000b92c6ec

<span class="c1"># set up a directory to be our shared endpoint</span>
<span class="c1"># note that this will throw an error if a directory already exists at this path</span>
$ globus mkdir <span class="nv">$ep1</span>:~/shared_dir
The directory was created successfully

<span class="c1"># set up the directory as a shared endpoint</span>
$ globus endpoint share <span class="nv">$ep1</span>:/~/shared_dir <span class="s2">&quot;CLI Example Shared Endpoint&quot;</span> <span class="se">\</span>
    --description <span class="s2">&quot;Example endpoint created using the Globus CLI&quot;</span>
Message:     Shared endpoint created successfully
Endpoint ID: 3e4efafe-dda4-11e6-9d11-22000a1e3b52

<span class="c1"># copy and paste the new shared endpoint ID for later use</span>
$ <span class="nv">shared</span><span class="o">=</span>&lt;paste here&gt;

<span class="c1"># add a permission to the endpoint</span>
<span class="c1"># this permission is r for read only</span>
<span class="c1"># and is given to anyone who has logged in</span>
$ globus endpoint permission create <span class="nv">$shared</span>:/ <span class="se">\</span>
    --permissions r --all-authenticated
Message: Access rule created successfully.
Rule ID: 62f909c6-dda4-11e6-9d11-22000a1e3b52

<span class="c1"># the new permission will now appear on the endpoints permission list</span>
<span class="c1"># note that the new permission appears alongside the owner&#39;s automatic</span>
<span class="c1"># read-write permissions</span>
$ globus endpoint permission list <span class="nv">$shared</span>
Rule ID                              <span class="p">|</span> Permissions <span class="p">|</span> Shared With             <span class="p">|</span> Path
------------------------------------ <span class="p">|</span> ----------- <span class="p">|</span> ----------------------- <span class="p">|</span> ----
62f909c6-dda4-11e6-9d11-22000a1e3b52 <span class="p">|</span> r           <span class="p">|</span> all_authenticated_users <span class="p">|</span> /
NULL                                 <span class="p">|</span> rw          <span class="p">|</span> example@globusid.org    <span class="p">|</span> /

<span class="c1"># the endpoint itself also shows up on your list of shared endpoints</span>
$ globus endpoint search --filter-scope shared-by-me
Owner                 <span class="p">|</span> ID                                   <span class="p">|</span> Display Name
--------------------- <span class="p">|</span> ------------------------------------ <span class="p">|</span> ---------------------------
example@globusid.org  <span class="p">|</span> 3e4efafe-dda4-11e6-9d11-22000a1e3b52 <span class="p">|</span> CLI Example Shared Endpoint
</pre></div>
</div>
</div>
<div class="section" id="safe-resubmissions">
<h2>Safe Resubmissions<a class="headerlink" href="#safe-resubmissions" title="Permalink to this headline">¶</a></h2>
<p>Generates a submission-id that allows for resubmitting a task multiple times
while guaranteeing that the actual task will only be carried out once.
This is useful for handling the unreliability of networks.</p>
<p>Note that the task ID of the task will differ from the submission ID.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="c1"># Tutorial Endpoint IDs found from &#39;globus endpoint search Tutorial&#39;</span>
$ <span class="nv">ep1</span><span class="o">=</span>ddb59aef-6d04-11e5-ba46-22000b92c6ec
$ <span class="nv">ep2</span><span class="o">=</span>ddb59af0-6d04-11e5-ba46-22000b92c6ec

<span class="c1"># generate and store a UUID for the submission-id</span>
$ <span class="nv">sub_id</span><span class="o">=</span><span class="k">$(</span>globus task generate-submission-id<span class="k">)</span>

<span class="c1"># submit multiple transfers using the same submission-id</span>
$ globus transfer <span class="nv">$ep1</span>:/share/godata <span class="nv">$ep2</span>:~/godata --recursive <span class="se">\</span>
    --submission-id <span class="nv">$sub_id</span> --label <span class="s2">&quot;1st submission&quot;</span>
Message: The transfer has been accepted and a task has been created and queued <span class="k">for</span> execution
Task ID: 8b43c4e2-dda5-11e6-9d11-22000a1e3b52

$ globus transfer <span class="nv">$ep1</span>:/share/godata <span class="nv">$ep2</span>:~/godata --recursive <span class="se">\</span>
    --submission-id <span class="nv">$sub_id</span> --label <span class="s2">&quot;2nd submission&quot;</span>
Message: A transfer with id <span class="s1">&#39;8b43c4e3-dda5-11e6-9d11-22000a1e3b52&#39;</span> was already submitted
Task ID: 8b43c4e2-dda5-11e6-9d11-22000a1e3b52

$ globus transfer <span class="nv">$ep1</span>:/share/godata <span class="nv">$ep2</span>:~/godata --recursive <span class="se">\</span>
    --submission-id <span class="nv">$sub_id</span> --label <span class="s2">&quot;3rd submission&quot;</span>
Message: A transfer with id <span class="s1">&#39;8b43c4e3-dda5-11e6-9d11-22000a1e3b52&#39;</span> was already submitted
Task ID: 8b43c4e2-dda5-11e6-9d11-22000a1e3b52

<span class="c1"># view the task list to confirm only one task was submitted</span>
$ globus task list
Task ID                              <span class="p">|</span> Status    <span class="p">|</span> Type     <span class="p">|</span> Source Display Name        <span class="p">|</span> Dest Display Name          <span class="p">|</span> Label
------------------------------------ <span class="p">|</span> --------- <span class="p">|</span> -------- <span class="p">|</span> -------------------------- <span class="p">|</span> -------------------------- <span class="p">|</span> ---------------------
8b43c4e2-dda5-11e6-9d11-22000a1e3b52 <span class="p">|</span> SUCCEEDED <span class="p">|</span> TRANSFER <span class="p">|</span> Globus Tutorial Endpoint <span class="m">1</span> <span class="p">|</span> Globus Tutorial Endpoint <span class="m">2</span> <span class="p">|</span> 1st submission
</pre></div>
</div>
<p>Note that only one submission has a success message, but all return the ID for
the Task, which only gets carried out once.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Globus CLI Examples</a><ul>
<li><a class="reference internal" href="#finding-an-endpoint">Finding an Endpoint</a></li>
<li><a class="reference internal" href="#endpoint-manipulation">Endpoint Manipulation</a></li>
<li><a class="reference internal" href="#single-item-transfers">Single Item Transfers</a></li>
<li><a class="reference internal" href="#batch-transfers">Batch Transfers</a></li>
<li><a class="reference internal" href="#deletions">Deletions</a></li>
<li><a class="reference internal" href="#task-management">Task Management</a></li>
<li><a class="reference internal" href="#bookmarks">Bookmarks</a></li>
<li><a class="reference internal" href="#shared-endpoints">Shared Endpoints</a></li>
<li><a class="reference internal" href="#safe-resubmissions">Safe Resubmissions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Globus CLI</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/examples.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="index.html" title="Globus CLI"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">globus-cli 0.5.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Globus.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.1.
    </div>
  </body>
</html>